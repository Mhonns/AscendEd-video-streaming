<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Conference Room</title>
  <link rel="stylesheet" href="../css/room.css">
  <link rel="stylesheet" href="../css/room-buttons.css">
  <link rel="stylesheet" href="../css/toggle-frame.css">
</head>
<body>
  <!-- Top Bar -->
  <div class="top-bar" id="top-bar">
    <div class="room-info">
      <div class="room-name">Meeting Room</div>
      <div class="room-id-container">
        <span class="room-id">Room ID: ABC123XYZ</span>
        <button class="copy-btn" id="copy-room-id-btn" title="Copy Room ID">
          <img src="../assets/icons/copy.svg" alt="Copy" class="copy-icon">
        </button>
      </div>
    </div>
    <div class="user-count">
      <img src="../assets/icons/people.svg" alt="People" class="people-icon">
      <span id="user-count-number">0</span>
    </div>
    <div class="top-controls">
      <button class="icon-btn" id="recording-btn" title="Stop Recording">
        <img src="../assets/icons/recording-off.svg" alt="Recording">
      </button>
      <button class="icon-btn" id="people-btn" title="Participants">
        <img src="../assets/icons/people.svg" alt="People">
        <span class="icon-badge"></span>
      </button>
      <button class="icon-btn" id="chat-btn" title="Chat">
        <img src="../assets/icons/chat.svg" alt="Chat">
        <span class="icon-badge"></span>
      </button>
      <button class="icon-btn" id="toggle-ui-btn" title="Toggle Auto-Hide">
        <img src="../assets/icons/pin.svg" alt="Pin">
      </button>
      <button class="icon-btn" id="fullscreen-btn" title="Toggle Fullscreen">
        <img src="../assets/icons/fullscreen.svg" alt="Fullscreen">
      </button>
      <button class="icon-btn" id="settings-btn" title="Settings">
        <img src="../assets/icons/setting.svg" alt="Settings">
      </button>
    </div>
  </div>

  <!-- Video Container -->
  <div class="video-container">
    <div class="video-grid" id="video-grid">
      <div class="video-placeholder" id="video-placeholder">
        <div class="placeholder-text">Welcome to the meeting!</div>
      </div>
    </div>
  </div>

  <!-- Users Sidebar -->
  <div class="users-sidebar" id="users-sidebar">
    <div class="users-list" id="users-list">
      <!-- Users will be dynamically added here -->
    </div>
  </div>

  <!-- Chat Sidebar -->
  <div class="chat-sidebar" id="chat-sidebar">
    <div class="chat-messages" id="chat-messages">
      <!-- Chat messages will be dynamically added here -->
    </div>
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="chat-input" placeholder="Type a message..." maxlength="500">
      <button class="chat-send-btn" id="chat-send-btn" title="Send Message">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="filter: invert(1);">
          <path d="M1 1L17 9L1 17M17 9H1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Bottom Controls -->
  <div class="bottom-controls" id="bottom-controls">
    <button class="control-btn off" id="mic-btn" title="Microphone">
      <img src="../assets/icons/mic-off.svg" alt="Mic">
    </button>
    <button class="control-btn off" id="camera-btn" title="Camera">
      <img src="../assets/icons/camera-off.svg" alt="Camera">
    </button>
    <button class="control-btn" id="share-btn" title="Share Screen">
      <img src="../assets/icons/screen.svg" alt="Share">
    </button>
    <button class="control-btn leave-btn" id="leave-btn" title="Leave">
      <img src="../assets/icons/leave.svg" alt="Leave">
    </button>
  </div>

  <!-- Microphone Permission Modal -->
  <div class="permission-modal" id="mic-permission-modal">
    <div class="permission-modal-content">
      <div class="permission-modal-icon">
        <img src="../assets/icons/mic.svg" alt="Microphone" style="width: 64px; height: 64px; filter: invert(1);">
      </div>
      <h2>Microphone Permission Required</h2>
      <p>This site needs access to your microphone to enable voice communication in the meeting.</p>
      <div class="permission-modal-buttons">
        <button class="permission-btn allow-btn" id="allow-mic-btn">Allow Microphone</button>
        <button class="permission-btn cancel-btn" id="deny-mic-btn">Not Now</button>
      </div>
      <p class="permission-note">You can enable your microphone later using the button in the bottom controls.</p>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
  <script src="../js/config.js"></script>
  <script src="../js/room-utils.js"></script>
  <script src="../js/ui-controls.js"></script>
  <script src="../js/users.js"></script>
  <script src="../js/socket-handler.js"></script>
  <script src="../js/buttons.js"></script>
  <script src="../js/chat.js"></script>
  <script src="../js/webrtc.js"></script>
  <script src="../js/room.js"></script>
</body>
</html>